PROJECT_NAME = talker.so
OBJS = router.o client.o msg.o 
CFLAGS = -Wall -fPIC -std=c++17 -g
LDFLAGS = -pthread -shared
DBUILD = ../build/linux/x86/
DINC = -I ../include/
DSRC = ../src/

.ONESHELL:

all: $(OBJS) link

%.o: $(DSRC)%.cpp
	$(CXX) $(CFLAGS) $(DINC) -o $(DBUILD)$@ -c $<

link: $(OBJS)
	cd $(DBUILD)
	$(CXX) $(LDFLAGS) -o $(PROJECT_NAME) $^ 
